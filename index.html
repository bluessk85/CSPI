<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSPI ì•”í˜¸í™”í ì‹œì¦Œ ê³ ì  ì˜ˆì¸¡ ì§€ìˆ˜ ëŒ€ì‹œë³´ë“œ - ìˆ˜ë™ ì…ë ¥</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        .manual-input-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            margin: 20px 0;
            border-radius: 15px;
            color: white;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .input-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .input-card h3 {
            margin: 0 0 15px 0;
            color: #fff;
            font-size: 1.1em;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            background: rgba(255, 255, 255, 0.9);
            box-sizing: border-box;
        }

        .url-link {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 0.9em;
            transition: background 0.3s;
        }

        .url-link:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .calculate-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: transform 0.2s;
        }

        .calculate-btn:hover {
            transform: scale(1.05);
        }

        .result-section {
            background: #f8f9fa;
            padding: 30px;
            margin: 20px 0;
            border-radius: 15px;
            text-align: center;
            color: #333;
        }

        .result-section h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .result-section h3 {
            color: #333;
            margin: 20px 0 10px 0;
        }

        .cspi-result {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            color: #333;
        }

        .cspi-level {
            font-size: 1.5em;
            margin: 10px 0;
        }

        .cspi-recommendation {
            font-size: 1.2em;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
        }

        .level-low {
            color: #27ae60;
        }

        .level-medium-low {
            color: #f39c12;
        }

        .level-medium {
            color: #e67e22;
        }

        .level-medium-high {
            color: #e74c3c;
        }

        .level-high {
            color: #c0392b;
        }

        .recommendation-low {
            background: #d5f4e6;
            color: #27ae60;
        }

        .recommendation-medium-low {
            background: #fef9e7;
            color: #f39c12;
        }

        .recommendation-medium {
            background: #fdf2e9;
            color: #e67e22;
        }

        .recommendation-medium-high {
            background: #fadbd8;
            color: #e74c3c;
        }

        .recommendation-high {
            background: #f8d7da;
            color: #c0392b;
        }

        .contributions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .contribution-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .contribution-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .contribution-value {
            font-size: 1.2em;
            color: #3498db;
        }

        /* ì‚¬ìš© ë°©ë²• ì„¹ì…˜ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .instructions-section {
            background: #f8f9fa;
            padding: 30px;
            margin: 20px 0;
            border-radius: 15px;
            color: #333;
        }

        .instructions-section h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .instructions-section h3 {
            color: #333;
            margin: 20px 0 10px 0;
        }

        .instructions-section ol,
        .instructions-section ul {
            color: #333;
        }

        .instructions-section li {
            color: #333;
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="header-title">ğŸš€ CSPI ì•”í˜¸í™”í ì‹œì¦Œ ê³ ì  ì˜ˆì¸¡ ì§€ìˆ˜</h1>
                    <div class="header-subtitle">ìˆ˜ë™ ì…ë ¥ ë°©ì‹ - ì •í™•í•œ ë°ì´í„°</div>
                    <div class="header-stats">
                        <div class="stat-item">
                            <span class="stat-label">í˜„ì¬ BTC ê°€ê²©</span>
                            <span class="stat-value" id="headerBtcPrice">ë¡œë”© ì¤‘...</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">CSPI ì ìˆ˜</span>
                            <span class="stat-value cspi-score" id="headerCSPIScore">-/100</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ì‹œì¥ ë‹¨ê³„</span>
                            <span class="stat-value market-phase" id="headerMarketPhase">ê³„ì‚° í•„ìš”</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <div class="current-time">
                        <div class="time-label">í˜„ì¬ ì‹œê°</div>
                        <div class="time-value" id="currentTime">-</div>
                    </div>
                    <div class="update-info">
                        <div class="update-item">
                            <span class="update-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</span>
                            <span class="update-value" id="lastUpdateTime">-</span>
                        </div>
                        <div class="update-item">
                            <span class="update-label">ì—…ë°ì´íŠ¸ ë°©ì‹</span>
                            <span class="countdown-timer" id="countdownTimer">ìˆ˜ë™ ì…ë ¥ ì „ìš©</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Manual Input Section -->
            <section class="manual-input-section">
                <h2>ğŸ“ ì§€í‘œ ìˆ˜ë™ ì…ë ¥</h2>
                <p>ê° ì§€í‘œì˜ í˜„ì¬ ê°’ì„ í™•ì¸í•˜ê³  ì…ë ¥í•œ í›„ ê³„ì‚° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>

                <div class="input-grid">
                    <!-- MVRV Z-Score -->
                    <div class="input-card">
                        <h3>ğŸ“Š MVRV Z-Score (ê°€ì¤‘ì¹˜ 30%)</h3>
                        <div class="input-group">
                            <label for="mvrvInput">MVRV Z-Score ê°’:</label>
                            <input type="number" id="mvrvInput" step="0.01" placeholder="ì˜ˆ: 2.61">
                        </div>
                        <a href="https://en.macromicro.me/charts/30335/bitcoin-mvrv-zscore" target="_blank"
                            class="url-link">
                            ğŸ”— MVRV ë°ì´í„° í™•ì¸í•˜ê¸°
                        </a>
                    </div>

                    <!-- Fear & Greed Index -->
                    <div class="input-card">
                        <h3>ğŸ˜¨ Fear & Greed Index (ê°€ì¤‘ì¹˜ 5%)</h3>
                        <div class="input-group">
                            <label for="fearGreedInput">Fear & Greed ê°’ (0-100):</label>
                            <input type="number" id="fearGreedInput" min="0" max="100" placeholder="ì˜ˆ: 72">
                        </div>
                        <a href="https://alternative.me/crypto/fear-and-greed-index/" target="_blank" class="url-link">
                            ğŸ”— Fear & Greed í™•ì¸í•˜ê¸°
                        </a>
                    </div>

                    <!-- Altcoin Season Index -->
                    <div class="input-card">
                        <h3>ğŸŒŠ ì•ŒíŠ¸ì½”ì¸ ì‹œì¦Œ ì¸ë±ìŠ¤ (ê°€ì¤‘ì¹˜ 25%)</h3>
                        <div class="input-group">
                            <label for="altseasonInput">ì•ŒíŠ¸ì‹œì¦Œ ì¸ë±ìŠ¤ (0-100):</label>
                            <input type="number" id="altseasonInput" min="0" max="100" placeholder="ì˜ˆ: 48">
                        </div>
                        <a href="https://www.blockchaincenter.net/altcoin-season-index/" target="_blank"
                            class="url-link">
                            ğŸ”— ì•ŒíŠ¸ì‹œì¦Œ ì¸ë±ìŠ¤ í™•ì¸í•˜ê¸°
                        </a>
                    </div>

                    <!-- BTC Dominance -->
                    <div class="input-card">
                        <h3>â‚¿ BTC ë„ë¯¸ë„ŒìŠ¤ (ê°€ì¤‘ì¹˜ 15%)</h3>
                        <div class="input-group">
                            <label for="dominanceInput">BTC ë„ë¯¸ë„ŒìŠ¤ (%):</label>
                            <input type="number" id="dominanceInput" step="0.1" placeholder="ì˜ˆ: 63.5">
                        </div>
                        <a href="https://coinmarketcap.com/charts/" target="_blank" class="url-link">
                            ğŸ”— BTC ë„ë¯¸ë„ŒìŠ¤ í™•ì¸í•˜ê¸°
                        </a>
                    </div>

                    <!-- Kimchi Premium -->
                    <div class="input-card">
                        <h3>ğŸŒ¶ï¸ ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„ (ê°€ì¤‘ì¹˜ 20%)</h3>
                        <div class="input-group">
                            <label for="kimchiInput">ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„ (%):</label>
                            <input type="number" id="kimchiInput" step="0.1" placeholder="ì˜ˆ: -0.8">
                        </div>
                        <a href="https://kimpga.com/" target="_blank" class="url-link">
                            ğŸ”— ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„ í™•ì¸í•˜ê¸°
                        </a>
                    </div>

                    <!-- RSI -->
                    <div class="input-card">
                        <h3>ğŸ“ˆ RSI (14ì¼) (ê°€ì¤‘ì¹˜ 5%)</h3>
                        <div class="input-group">
                            <label for="rsiInput">RSI ê°’ (0-100):</label>
                            <input type="number" id="rsiInput" min="0" max="100" placeholder="ì˜ˆ: 66.5">
                        </div>
                        <a href="https://charts.bitbo.io/monthly-rsi/" target="_blank"
                            class="url-link">
                            ğŸ”— RSI í™•ì¸í•˜ê¸° (Bitbo)
                        </a>
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateCSPI()">
                    ğŸ§® CSPI ì ìˆ˜ ê³„ì‚°í•˜ê¸°
                </button>
            </section>

            <!-- Result Section -->
            <section class="result-section" id="resultSection" style="display: none;">
                <h2>ğŸ¯ CSPI ê³„ì‚° ê²°ê³¼</h2>

                <div class="cspi-result" id="cspiResult">-/100</div>
                <div class="cspi-level" id="cspiLevel">-</div>
                <div class="cspi-recommendation" id="cspiRecommendation">-</div>

                <h3>ğŸ“Š ê° ì§€í‘œë³„ ê¸°ì—¬ë„</h3>
                <div class="contributions-grid" id="contributionsGrid">
                    <!-- ê¸°ì—¬ë„ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </section>

            <!-- Main CSPI Gauge Section -->
            <section class="cspi-gauge-section">
                <div class="gauge-container">
                    <div class="gauge-header">
                        <h2>ğŸ¯ CSPI (Crypto Season Peak Index)</h2>
                        <div class="gauge-subtitle">ìˆ˜ë™ ì…ë ¥ ê¸°ë°˜ ì•”í˜¸í™”í ì‹œì¦Œ ê³ ì  ì˜ˆì¸¡ ì§€ìˆ˜</div>
                        <div class="real-time-indicator">
                            <span class="pulse-dot"></span>
                            <span>ê³„ì‚° ëŒ€ê¸° ì¤‘</span>
                        </div>
                    </div>
                    <div class="gauge-main">
                        <canvas id="cspiGauge" width="300" height="200"></canvas>
                        <div class="gauge-info">
                            <div class="gauge-score">
                                <span class="score-value" id="cspiScoreValue">-</span>
                                <span class="score-total">/100</span>
                            </div>
                            <div class="gauge-status" id="cspiStatus">ê³„ì‚° í•„ìš”</div>
                            <div class="gauge-description" id="cspiDescription">ì§€í‘œë¥¼ ì…ë ¥í•˜ê³  ê³„ì‚°í•´ì£¼ì„¸ìš”</div>
                        </div>
                    </div>
                    <div class="gauge-stats">
                        <div class="stat-item">
                            <span class="stat-label">ì‚¬ì´í´ ì§„í–‰ë¥ </span>
                            <span class="stat-value progress-value" id="progressValue">-%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ì”ì—¬ ìƒìŠ¹ ì—¬ë ¥</span>
                            <span class="stat-value upside-value" id="upsideValue">-í¬ì¸íŠ¸</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ìœ„í—˜ ìˆ˜ì¤€</span>
                            <span class="stat-value risk-value" id="riskValue">-</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Individual Indicators Grid -->
            <section class="indicators-grid-section">
                <h2>ğŸ“Š ì‹¤ì‹œê°„ ê°œë³„ ì§€í‘œ í˜„í™©</h2>
                <div class="indicators-grid">
                    <!-- MVRV Z-Score Card -->
                    <div class="indicator-card mvrv-card">
                        <div class="card-header">
                            <h3>MVRV Z-Score</h3>
                            <div class="card-badges">
                                <span class="weight-badge">ê°€ì¤‘ì¹˜ 30%</span>
                                <span class="api-badge realtime">ì‹¤ì‹œê°„ API</span>
                            </div>
                        </div>
                        <div class="card-main">
                            <div class="indicator-value" id="mvrvValue">2.8</div>
                            <div class="normalized-score" id="mvrvNormalized">28.0/100</div>
                        </div>
                        <div class="card-status">
                            <div class="status-text" id="mvrvStatus">ì•ˆì „ ì¶•ì  êµ¬ê°„</div>
                            <div class="contribution" id="mvrvContribution">ê¸°ì—¬ë„: 8.4</div>
                        </div>
                        <div class="card-details">
                            <div class="detail-item">
                                <span>ë°ì´í„° ì¶œì²˜: MacroMicro.me</span>
                            </div>
                            <div class="detail-item">
                                <span>ê³¼ê±° í”¼í¬ ëŒ€ë¹„ ì—¬ìœ : 72%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Altcoin Season Index Card -->
                    <div class="indicator-card altseason-card">
                        <div class="card-header">
                            <h3>ì•ŒíŠ¸ì½”ì¸ ì‹œì¦Œ ì¸ë±ìŠ¤ â­</h3>
                            <div class="card-badges">
                                <span class="weight-badge">ê°€ì¤‘ì¹˜ 25%</span>
                                <span class="api-badge">ê³„ì‚°ê°’</span>
                            </div>
                        </div>
                        <div class="card-main">
                            <div class="indicator-value" id="altseasonValue">48</div>
                            <div class="normalized-score" id="altseasonNormalized">48/100</div>
                        </div>
                        <div class="card-status">
                            <div class="status-text" id="altseasonStatus">Bitcoin Season</div>
                            <div class="contribution" id="altseasonContribution">ê¸°ì—¬ë„: 12.0</div>
                        </div>
                        <div class="card-details">
                            <div class="detail-item">
                                <span>ì•ŒíŠ¸ì‹œì¦Œ ì„ê³„ì (75)ê¹Œì§€: 27í¬ì¸íŠ¸</span>
                            </div>
                            <div class="detail-item">
                                <span>ê³¼ê±° í”¼í¬ (2017: 87, 2021: 89)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Kimchi Premium Card -->
                    <div class="indicator-card kimchi-card">
                        <div class="card-header">
                            <h3>ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„ â­</h3>
                            <div class="card-badges">
                                <span class="weight-badge">ê°€ì¤‘ì¹˜ 20%</span>
                                <span class="api-badge">ê³„ì‚°ê°’</span>
                            </div>
                        </div>
                        <div class="card-main">
                            <div class="indicator-value negative" id="kimchiValue">-0.8%</div>
                            <div class="normalized-score" id="kimchiNormalized">48.4/100</div>
                        </div>
                        <div class="card-status">
                            <div class="status-text" id="kimchiStatus">ì—­ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„</div>
                            <div class="contribution" id="kimchiContribution">ê¸°ì—¬ë„: 9.7</div>
                        </div>
                        <div class="card-details">
                            <div class="detail-item">
                                <span>ì˜ë¯¸: í•´ì™¸ ìˆ˜ìš” > êµ­ë‚´ ìˆ˜ìš”</span>
                            </div>
                            <div class="detail-item">
                                <span>ê³¼ê±° í”¼í¬ (2017: 55%, 2021: 11.86%)</span>
                            </div>
                        </div>
                    </div>

                    <!-- BTC Dominance Card -->
                    <div class="indicator-card dominance-card">
                        <div class="card-header">
                            <h3>BTC ë„ë¯¸ë„ŒìŠ¤</h3>
                            <div class="card-badges">
                                <span class="weight-badge">ê°€ì¤‘ì¹˜ 15%</span>
                                <span class="api-badge">ê³„ì‚°ê°’</span>
                            </div>
                        </div>
                        <div class="card-main">
                            <div class="indicator-value" id="dominanceValue">63.5%</div>
                            <div class="normalized-score" id="dominanceNormalized">36.5/100</div>
                        </div>
                        <div class="card-status">
                            <div class="status-text" id="dominanceStatus">ë¹„íŠ¸ì½”ì¸ ê°•ì„¸</div>
                            <div class="contribution" id="dominanceContribution">ê¸°ì—¬ë„: 5.5</div>
                        </div>
                        <div class="card-details">
                            <div class="detail-item">
                                <span>ì•ŒíŠ¸ì‹œì¦Œ ê¸°ì¤€(35%)ê¹Œì§€: 28.5í¬ì¸íŠ¸</span>
                            </div>
                            <div class="detail-item">
                                <span>í˜„ì¬ ìˆ˜ì¤€: ë†’ìŒ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Fear & Greed Index Card -->
                    <div class="indicator-card feargreed-card">
                        <div class="card-header">
                            <h3>Fear & Greed Index</h3>
                            <div class="card-badges">
                                <span class="weight-badge">ê°€ì¤‘ì¹˜ 5%</span>
                                <span class="api-badge realtime">ì‹¤ì‹œê°„ API</span>
                            </div>
                        </div>
                        <div class="card-main">
                            <div class="indicator-value" id="fearGreedValue">72</div>
                            <div class="normalized-score" id="fearGreedNormalized">72/100</div>
                        </div>
                        <div class="card-status">
                            <div class="status-text" id="fearGreedStatus">Greed</div>
                            <div class="contribution" id="fearGreedContribution">ê¸°ì—¬ë„: 3.6</div>
                        </div>
                        <div class="card-details">
                            <div class="detail-item">
                                <span>0-100 ìŠ¤ì¼€ì¼: íƒìš•</span>
                            </div>
                        </div>
                    </div>

                    <!-- RSI Card -->
                    <div class="indicator-card rsi-card">
                        <div class="card-header">
                            <h3>RSI (14ì¼)</h3>
                            <div class="card-badges">
                                <span class="weight-badge">ê°€ì¤‘ì¹˜ 5%</span>
                                <span class="api-badge">ê³„ì‚°ê°’</span>
                            </div>
                        </div>
                        <div class="card-main">
                            <div class="indicator-value" id="rsiValue">66.5</div>
                            <div class="normalized-score" id="rsiNormalized">66.5/100</div>
                        </div>
                        <div class="card-status">
                            <div class="status-text" id="rsiStatus">ì¤‘ë¦½</div>
                            <div class="contribution" id="rsiContribution">ê¸°ì—¬ë„: 3.3</div>
                        </div>
                        <div class="card-details">
                            <div class="detail-item">
                                <span>ê³¼ë§¤ìˆ˜(80+) ì„ê³„ì ê¹Œì§€: 13.5í¬ì¸íŠ¸</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Investment Recommendations -->
            <section class="recommendations-section">
                <h2>ğŸ’¡ ì‹¤ì‹œê°„ íˆ¬ì ê¶Œê³ ì‚¬í•­</h2>
                <div class="recommendations-grid">
                    <div class="recommendation-card portfolio-card">
                        <h3>ê¶Œì¥ í¬íŠ¸í´ë¦¬ì˜¤</h3>
                        <div class="portfolio-breakdown">
                            <div class="portfolio-item">
                                <span class="asset-name">BTC</span>
                                <span class="asset-percentage">50%</span>
                            </div>
                            <div class="portfolio-item">
                                <span class="asset-name">ETH</span>
                                <span class="asset-percentage">35%</span>
                            </div>
                            <div class="portfolio-item">
                                <span class="asset-name">ALTS</span>
                                <span class="asset-percentage">15%</span>
                            </div>
                            <div class="portfolio-item">
                                <span class="asset-name">STABLE</span>
                                <span class="asset-percentage">0%</span>
                            </div>
                        </div>
                    </div>
                    <div class="recommendation-card timing-card">
                        <h3>íƒ€ì´ë° ê¶Œê³ </h3>
                        <div class="timing-text">ìƒìŠ¹ì¥ ì´ˆë°˜ - ì ì§„ì  ë§¤ìˆ˜ ì§€ì†</div>
                        <div class="risk-assessment">ìœ„í—˜ ìˆ˜ì¤€: <span class="risk-low">ë‚®ìŒ</span></div>
                        <div class="next-update">
                            <span class="update-timer">ê¶Œê³  ì—…ë°ì´íŠ¸: <span id="nextRecommendationUpdate">ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨
                                    ì‹œ</span></span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Historical Cycles Comparison Chart -->
            <section class="historical-section">
                <h2>ğŸ“ˆ ê³¼ê±° ì‚¬ì´í´ ë¹„êµ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)</h2>
                <div class="chart-container">
                    <canvas id="historicalChart"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #1FB8CD"></div>
                        <span>2017 ì‚¬ì´í´</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #FFC185"></div>
                        <span>2021 ì‚¬ì´í´</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #B4413C"></div>
                        <span>2025 ì‚¬ì´í´ (í˜„ì¬)</span>
                        <span class="realtime-badge">ì‹¤ì‹œê°„</span>
                    </div>
                </div>
            </section>

            <!-- Real-time Data Validation Status -->
            <section class="validation-section">
                <h2>ğŸ” ì‹¤ì‹œê°„ ë°ì´í„° ê²€ì¦ ì‹œìŠ¤í…œ</h2>
                <div class="validation-grid">
                    <div class="validation-item">
                        <div class="validation-status connected" id="btcPriceStatus">
                            <span class="status-dot"></span>
                            <span>BTC ê°€ê²© ë°ì´í„°</span>
                            <span class="api-source">CoinGecko API</span>
                        </div>
                        <div class="validation-value" id="validationBtcPrice">ë¡œë”© ì¤‘...</div>
                    </div>
                    <div class="validation-item">
                        <div class="validation-status connected" id="cspiStatus">
                            <span class="status-dot"></span>
                            <span>CSPI ì§€ìˆ˜ ë°ì´í„°</span>
                            <span class="api-source">ì‹¤ì‹œê°„ ê³„ì‚°</span>
                        </div>
                        <div class="validation-value" id="validationCSPI">38.3/100</div>
                    </div>
                    <div class="validation-item">
                        <div class="validation-status connected" id="indicatorsStatus">
                            <span class="status-dot"></span>
                            <span>ê°œë³„ ì§€í‘œ ë°ì´í„°</span>
                            <span class="api-source">6ê°œ ì§€í‘œ ì •ìƒ</span>
                        </div>
                        <div class="validation-value" id="validationIndicators">ì‹¤ì‹œê°„ ë™ê¸°í™”</div>
                    </div>
                    <div class="validation-item">
                        <div class="validation-status connected" id="dataFeedStatus">
                            <span class="status-dot"></span>
                            <span>ì‹¤ì‹œê°„ ë°ì´í„° í”¼ë“œ</span>
                            <span class="api-source">ì™¸ë¶€ API ì—°ê²°</span>
                        </div>
                        <div class="validation-value" id="validationDataFeed">ì—°ê²°ë¨</div>
                    </div>
                </div>
            </section>

            <!-- Instructions Section -->
            <section class="instructions-section">
                <h2>ğŸ“‹ ì‚¬ìš© ë°©ë²•</h2>
                <ol style="font-size: 1.1em; line-height: 1.6;">
                    <li><strong>ê° ì§€í‘œ í™•ì¸:</strong> ì œê³µëœ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ê° ì§€í‘œì˜ í˜„ì¬ ê°’ì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
                    <li><strong>ê°’ ì…ë ¥:</strong> í™•ì¸í•œ ê°’ì„ í•´ë‹¹ ì…ë ¥ í•„ë“œì— ì •í™•íˆ ì…ë ¥í•©ë‹ˆë‹¤.</li>
                    <li><strong>ê³„ì‚° ì‹¤í–‰:</strong> ëª¨ë“  ê°’ì„ ì…ë ¥í•œ í›„ "CSPI ì ìˆ˜ ê³„ì‚°í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</li>
                    <li><strong>ê²°ê³¼ í™•ì¸:</strong> ê³„ì‚°ëœ CSPI ì ìˆ˜ì™€ íˆ¬ì ê¶Œê³ ì‚¬í•­ì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
                </ol>

                <h3>ğŸšï¸ CSPI ì ìˆ˜ í•´ì„</h3>
                <ul style="font-size: 1.1em; line-height: 1.6;">
                    <li><strong>0-25:</strong> ğŸŸ¢ LOW - ì ê·¹ì  ë§¤ìˆ˜ ê¶Œì¥</li>
                    <li><strong>25-45:</strong> ğŸŸ¡ MEDIUM-LOW - ì ì§„ì  ë§¤ìˆ˜ ê¶Œì¥</li>
                    <li><strong>45-65:</strong> ğŸŸ  MEDIUM - ê´€ë§ ê¶Œì¥</li>
                    <li><strong>65-80:</strong> ğŸ”´ MEDIUM-HIGH - ë¶€ë¶„ ë§¤ë„ ê¶Œì¥</li>
                    <li><strong>80-100:</strong> ğŸš¨ HIGH - ì ê·¹ì  ë§¤ë„ ê¶Œì¥</li>
                </ul>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>ğŸ”„ ì—…ë°ì´íŠ¸ ë°©ì‹: ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ì „ìš© | ğŸ“¡ ë°ì´í„° ì¶œì²˜: CoinGecko, Alternative.me, MacroMicro API</p>
                <p>âš ï¸ ë³¸ ëŒ€ì‹œë³´ë“œëŠ” ì‹¤ì œ APIì—ì„œ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ íˆ¬ì ì°¸ê³ ìš©ìœ¼ë¡œ ì œê³µë˜ë©°, íˆ¬ì ê²°ì •ì€ ë³¸ì¸ ì±…ì„ì…ë‹ˆë‹¤.</p>
                <p>ğŸ”¬ CSPI ì§€ìˆ˜ëŠ” 6ê°€ì§€ ê¸°ìˆ ì  ì§€í‘œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¢…í•©í•˜ì—¬ ì‚°ì¶œë©ë‹ˆë‹¤.</p>
                <p>ğŸš€ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì¦‰ì‹œ ìµœì‹  ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤!</p>
            </div>
        </div>
    </footer>

    <script>
        // Update current time every second
        setInterval(() => {
            const now = new Date();
            const timeString = now.toLocaleString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.getElementById('currentTime').textContent = timeString;
        }, 1000);

        // Initialize current time immediately
        const now = new Date();
        const timeString = now.toLocaleString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false
        });
        document.getElementById('currentTime').textContent = timeString;

        // BTC ê°€ê²© ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
        async function fetchBTCPrice() {
            try {
                console.log('ğŸ“¡ BTC ê°€ê²© ë°ì´í„° ìš”ì²­ ì¤‘...');
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();

                if (data.bitcoin) {
                    const price = data.bitcoin.usd;
                    const change24h = data.bitcoin.usd_24h_change || 0;

                    // ê°€ê²© í¬ë§·íŒ… (ì²œ ë‹¨ìœ„ ì½¤ë§ˆ)
                    const formattedPrice = `$${price.toLocaleString()}`;

                    // 24ì‹œê°„ ë³€í™”ìœ¨ í‘œì‹œ
                    const changeSymbol = change24h >= 0 ? 'â–²' : 'â–¼';
                    const changeColor = change24h >= 0 ? '#27ae60' : '#e74c3c';

                    document.getElementById('headerBtcPrice').innerHTML = `
                        ${formattedPrice} 
                        <span style="color: ${changeColor}; font-size: 0.8em;">
                            ${changeSymbol} ${Math.abs(change24h).toFixed(2)}%
                        </span>
                    `;

                    // validation ì„¹ì…˜ë„ ì—…ë°ì´íŠ¸
                    document.getElementById('validationBtcPrice').textContent = formattedPrice;

                    console.log(`âœ… BTC ê°€ê²© ì—…ë°ì´íŠ¸: ${formattedPrice} (${change24h.toFixed(2)}%)`);
                } else {
                    throw new Error('Invalid BTC data format');
                }
            } catch (error) {
                console.error('âŒ BTC ê°€ê²© ë°ì´í„° ì˜¤ë¥˜:', error);
                document.getElementById('headerBtcPrice').textContent = 'ê°€ê²© ë¡œë”© ì‹¤íŒ¨';
                document.getElementById('validationBtcPrice').textContent = 'ê°€ê²© ë¡œë”© ì‹¤íŒ¨';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ BTC ê°€ê²© ê°€ì ¸ì˜¤ê¸°
        fetchBTCPrice();

        // 5ë¶„ë§ˆë‹¤ BTC ê°€ê²© ì—…ë°ì´íŠ¸
        setInterval(fetchBTCPrice, 5 * 60 * 1000);

        // CSPI ê³„ì‚° í•¨ìˆ˜
        function calculateCSPI() {
            // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const mvrv = parseFloat(document.getElementById('mvrvInput').value);
            const fearGreed = parseFloat(document.getElementById('fearGreedInput').value);
            const altseason = parseFloat(document.getElementById('altseasonInput').value);
            const dominance = parseFloat(document.getElementById('dominanceInput').value);
            const kimchi = parseFloat(document.getElementById('kimchiInput').value);
            const rsi = parseFloat(document.getElementById('rsiInput').value);

            // ì…ë ¥ê°’ ê²€ì¦
            const inputs = [
                { name: 'MVRV Z-Score', value: mvrv, min: -5, max: 15 },
                { name: 'Fear & Greed', value: fearGreed, min: 0, max: 100 },
                { name: 'ì•ŒíŠ¸ì‹œì¦Œ ì¸ë±ìŠ¤', value: altseason, min: 0, max: 100 },
                { name: 'BTC ë„ë¯¸ë„ŒìŠ¤', value: dominance, min: 0, max: 100 },
                { name: 'ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„', value: kimchi, min: -20, max: 20 },
                { name: 'RSI', value: rsi, min: 0, max: 100 }
            ];

            let hasError = false;
            let errorMessage = '';

            inputs.forEach(input => {
                if (isNaN(input.value)) {
                    hasError = true;
                    errorMessage += `${input.name} ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\n`;
                } else if (input.value < input.min || input.value > input.max) {
                    hasError = true;
                    errorMessage += `${input.name} ê°’ì´ ìœ íš¨ ë²”ìœ„(${input.min}~${input.max})ë¥¼ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤.\n`;
                }
            });

            if (hasError) {
                alert(errorMessage);
                return;
            }

            // CSPI ê³„ì‚° ë¡œì§ - ê³¼ê±° ë°ì´í„° ê¸°ë°˜ ê°œì„ 
            const weights = {
                mvrv: 0.30,
                altseason: 0.25,
                kimchi: 0.20,
                dominance: 0.15,
                fearGreed: 0.05,
                rsi: 0.05
            };

            // ê³¼ê±° ê³ ì  ë°ì´í„° ê¸°ë°˜ ì •ê·œí™” í•¨ìˆ˜ë“¤
            function calculateMVRVScore(mvrv) {
                const historicalData = {
                    peak_2017: 7.8,
                    peak_2021: 6.8,
                    buy_zone: 0.5,
                    sell_zone_1: 5.0,
                    extreme_low: -1.5
                };

                if (mvrv <= historicalData.buy_zone) return Math.max(0, (mvrv - historicalData.extreme_low) / (historicalData.buy_zone - historicalData.extreme_low) * 20);
                if (mvrv >= historicalData.peak_2017) return 100;

                // ë¹„ì„ í˜• ìŠ¤ì¼€ì¼ë§ (ê³ ì  ê·¼ì²˜ì—ì„œ ê¸‰ê²©íˆ ì¦ê°€)
                const position = (mvrv - historicalData.buy_zone) / (historicalData.peak_2017 - historicalData.buy_zone);
                return 20 + Math.pow(position, 1.3) * 80;
            }

            function calculateKimchiScore(kimchi) {
                const historicalData = {
                    peak_2017: 55.0,
                    peak_2021: 11.86,
                    normal_high: 5,
                    extreme_negative: -15
                };

                if (kimchi <= historicalData.extreme_negative) return 0;
                if (kimchi >= historicalData.peak_2017) return 100;

                // S-curve ì ìš©
                const normalized = (kimchi - historicalData.extreme_negative) / (historicalData.peak_2017 - historicalData.extreme_negative);
                return (1 / (1 + Math.exp(-10 * (normalized - 0.5)))) * 100;
            }

            function calculateAltseasonScore(altseason) {
                const historicalData = {
                    peak_2017: 87,
                    peak_2021: 89,
                    bitcoin_threshold: 25,
                    alt_threshold: 75
                };

                if (altseason <= historicalData.bitcoin_threshold) {
                    return altseason * 0.8; // Bitcoin seasonì—ì„œëŠ” ë‚®ì€ ì ìˆ˜
                }
                if (altseason >= historicalData.alt_threshold) {
                    return 60 + (altseason - historicalData.alt_threshold) * 2.67; // 75 ì´í›„ ê°€ì†
                }

                // ì¤‘ê°„ êµ¬ê°„ ì„ í˜•
                return 20 + (altseason - historicalData.bitcoin_threshold) * 0.8;
            }

            function calculateDominanceScore(dominance) {
                const historicalData = {
                    alt_season_threshold: 35,
                    bitcoin_season_threshold: 70,
                    extreme_high: 80
                };

                if (dominance >= historicalData.extreme_high) return 0;
                if (dominance <= historicalData.alt_season_threshold) return 100;

                // ì—­ë¹„ë¡€ ê´€ê³„ (ë„ë¯¸ë„ŒìŠ¤ ë†’ì„ìˆ˜ë¡ CSPI ë‚®ìŒ)
                return Math.max(0, 100 - ((dominance - historicalData.alt_season_threshold) / (historicalData.extreme_high - historicalData.alt_season_threshold)) * 100);
            }

            function calculateFearGreedScore(fearGreed) {
                // Fear & GreedëŠ” ì—­ì„¤ì  ì§€í‘œ (ê·¹ë‹¨ì ì¼ ë•Œ ë°˜ëŒ€ ì‹ í˜¸)
                if (fearGreed <= 10) return 20; // Extreme Fear = ë§¤ìˆ˜ ê¸°íšŒ
                if (fearGreed >= 90) return 90; // Extreme Greed = ìœ„í—˜

                // 50 ê·¼ì²˜ì—ì„œ ì¤‘ë¦½, ì–‘ ê·¹ë‹¨ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ìœ„í—˜ë„ ì¦ê°€
                const deviation = Math.abs(fearGreed - 50);
                return 50 + deviation * 0.8;
            }

            function calculateRSIScore(rsi) {
                // RSI ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„ êµ¬ê°„ ê³ ë ¤
                if (rsi <= 30) return 20; // ê³¼ë§¤ë„ = ë§¤ìˆ˜ ê¸°íšŒ
                if (rsi >= 70) return 80; // ê³¼ë§¤ìˆ˜ = ìœ„í—˜

                return rsi; // ì¤‘ê°„ êµ¬ê°„ì€ ê·¸ëŒ€ë¡œ
            }

            // ê°œì„ ëœ ì •ê·œí™” ì ìš©
            const normalizedMvrv = calculateMVRVScore(mvrv);
            const normalizedFearGreed = calculateFearGreedScore(fearGreed);
            const normalizedAltseason = calculateAltseasonScore(altseason);
            const normalizedDominance = calculateDominanceScore(dominance);
            const normalizedKimchi = calculateKimchiScore(kimchi);
            const normalizedRsi = calculateRSIScore(rsi);

            // ê¸°ì—¬ë„ ê³„ì‚°
            const contributions = {
                mvrv: normalizedMvrv * weights.mvrv,
                altseason: normalizedAltseason * weights.altseason,
                kimchi: normalizedKimchi * weights.kimchi,
                dominance: normalizedDominance * weights.dominance,
                fearGreed: normalizedFearGreed * weights.fearGreed,
                rsi: normalizedRsi * weights.rsi
            };

            // ì´ CSPI ì ìˆ˜
            const cspiScore = Object.values(contributions).reduce((sum, contrib) => sum + contrib, 0);

            // ê²°ê³¼ í‘œì‹œ
            displayResults(cspiScore, contributions, {
                mvrv: normalizedMvrv,
                fearGreed: normalizedFearGreed,
                altseason: normalizedAltseason,
                dominance: normalizedDominance,
                kimchi: normalizedKimchi,
                rsi: normalizedRsi
            });

            // ê¸°ì¡´ UI ì—…ë°ì´íŠ¸
            updateExistingUI(cspiScore, {
                mvrv: mvrv,
                fearGreed: fearGreed,
                altseason: altseason,
                dominance: dominance,
                kimchi: kimchi,
                rsi: rsi
            }, contributions);
        }

        function displayResults(cspiScore, contributions, normalized) {
            // CSPI ì ìˆ˜ í‘œì‹œ
            document.getElementById('cspiResult').textContent = `${cspiScore.toFixed(1)}/100`;

            // ë ˆë²¨ ë° ê¶Œê³ ì‚¬í•­ ê²°ì •
            let level, recommendation, levelClass, recommendationClass;

            if (cspiScore < 25) {
                level = 'ğŸŸ¢ LOW';
                recommendation = 'ì ê·¹ì  ë§¤ìˆ˜ ê¶Œì¥';
                levelClass = 'level-low';
                recommendationClass = 'recommendation-low';
            } else if (cspiScore < 45) {
                level = 'ğŸŸ¡ MEDIUM-LOW';
                recommendation = 'ì ì§„ì  ë§¤ìˆ˜ ê¶Œì¥';
                levelClass = 'level-medium-low';
                recommendationClass = 'recommendation-medium-low';
            } else if (cspiScore < 65) {
                level = 'ğŸŸ  MEDIUM';
                recommendation = 'ê´€ë§ ê¶Œì¥';
                levelClass = 'level-medium';
                recommendationClass = 'recommendation-medium';
            } else if (cspiScore < 80) {
                level = 'ğŸ”´ MEDIUM-HIGH';
                recommendation = 'ë¶€ë¶„ ë§¤ë„ ê¶Œì¥';
                levelClass = 'level-medium-high';
                recommendationClass = 'recommendation-medium-high';
            } else {
                level = 'ğŸš¨ HIGH';
                recommendation = 'ì ê·¹ì  ë§¤ë„ ê¶Œì¥';
                levelClass = 'level-high';
                recommendationClass = 'recommendation-high';
            }

            document.getElementById('cspiLevel').textContent = level;
            document.getElementById('cspiLevel').className = `cspi-level ${levelClass}`;

            document.getElementById('cspiRecommendation').textContent = recommendation;
            document.getElementById('cspiRecommendation').className = `cspi-recommendation ${recommendationClass}`;

            // í—¤ë” ì—…ë°ì´íŠ¸
            document.getElementById('headerCSPIScore').textContent = `${cspiScore.toFixed(1)}/100`;
            document.getElementById('headerMarketPhase').textContent = level;

            // ê¸°ì—¬ë„ í‘œì‹œ
            const contributionsGrid = document.getElementById('contributionsGrid');
            contributionsGrid.innerHTML = '';

            const contributionLabels = {
                mvrv: 'MVRV Z-Score',
                altseason: 'ì•ŒíŠ¸ì‹œì¦Œ ì¸ë±ìŠ¤',
                kimchi: 'ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„',
                dominance: 'BTC ë„ë¯¸ë„ŒìŠ¤',
                fearGreed: 'Fear & Greed',
                rsi: 'RSI'
            };

            Object.entries(contributions).forEach(([key, value]) => {
                const item = document.createElement('div');
                item.className = 'contribution-item';
                item.innerHTML = `
                    <div class="contribution-name">${contributionLabels[key]}</div>
                    <div class="contribution-value">${value.toFixed(2)}ì </div>
                    <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                        ì •ê·œí™”: ${normalized[key].toFixed(1)}/100
                    </div>
                `;
                contributionsGrid.appendChild(item);
            });

            // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        function updateExistingUI(cspiScore, rawValues, contributions) {
            // ë©”ì¸ ê²Œì´ì§€ ì—…ë°ì´íŠ¸
            document.getElementById('cspiScoreValue').textContent = cspiScore.toFixed(1);

            // ìƒíƒœ ì—…ë°ì´íŠ¸
            let status, description, riskLevel;
            if (cspiScore < 25) {
                status = 'ğŸŸ¢ LOW';
                description = 'ì ê·¹ì  ë§¤ìˆ˜ ê¶Œì¥';
                riskLevel = 'ë‚®ìŒ';
            } else if (cspiScore < 45) {
                status = 'ğŸŸ¡ MEDIUM-LOW';
                description = 'ì ì§„ì  ë§¤ìˆ˜ ê¶Œì¥';
                riskLevel = 'ë‚®ìŒ';
            } else if (cspiScore < 65) {
                status = 'ğŸŸ  MEDIUM';
                description = 'ê´€ë§ ê¶Œì¥';
                riskLevel = 'ë³´í†µ';
            } else if (cspiScore < 80) {
                status = 'ğŸ”´ MEDIUM-HIGH';
                description = 'ë¶€ë¶„ ë§¤ë„ ê¶Œì¥';
                riskLevel = 'ë†’ìŒ';
            } else {
                status = 'ğŸš¨ HIGH';
                description = 'ì ê·¹ì  ë§¤ë„ ê¶Œì¥';
                riskLevel = 'ë§¤ìš° ë†’ìŒ';
            }

            document.getElementById('cspiStatus').textContent = status;
            document.getElementById('cspiDescription').textContent = description;
            document.getElementById('progressValue').textContent = `${cspiScore.toFixed(1)}%`;
            document.getElementById('upsideValue').textContent = `${(100 - cspiScore).toFixed(1)}í¬ì¸íŠ¸`;
            document.getElementById('riskValue').textContent = riskLevel;

            // ê°œë³„ ì§€í‘œ ì¹´ë“œ ì—…ë°ì´íŠ¸
            document.getElementById('mvrvValue').textContent = rawValues.mvrv.toFixed(2);
            document.getElementById('mvrvNormalized').textContent = `${((rawValues.mvrv / 12.0) * 100).toFixed(1)}/100`;
            document.getElementById('mvrvContribution').textContent = `ê¸°ì—¬ë„: ${contributions.mvrv.toFixed(1)}`;

            document.getElementById('altseasonValue').textContent = rawValues.altseason;
            document.getElementById('altseasonNormalized').textContent = `${rawValues.altseason}/100`;
            document.getElementById('altseasonContribution').textContent = `ê¸°ì—¬ë„: ${contributions.altseason.toFixed(1)}`;

            document.getElementById('kimchiValue').textContent = `${rawValues.kimchi}%`;
            document.getElementById('kimchiNormalized').textContent = `${(((rawValues.kimchi + 20) / 40) * 100).toFixed(1)}/100`;
            document.getElementById('kimchiContribution').textContent = `ê¸°ì—¬ë„: ${contributions.kimchi.toFixed(1)}`;

            document.getElementById('dominanceValue').textContent = `${rawValues.dominance}%`;
            document.getElementById('dominanceNormalized').textContent = `${(((70 - rawValues.dominance) / 35) * 100).toFixed(1)}/100`;
            document.getElementById('dominanceContribution').textContent = `ê¸°ì—¬ë„: ${contributions.dominance.toFixed(1)}`;

            document.getElementById('fearGreedValue').textContent = rawValues.fearGreed;
            document.getElementById('fearGreedNormalized').textContent = `${rawValues.fearGreed}/100`;
            document.getElementById('fearGreedContribution').textContent = `ê¸°ì—¬ë„: ${contributions.fearGreed.toFixed(1)}`;

            document.getElementById('rsiValue').textContent = rawValues.rsi.toFixed(1);
            document.getElementById('rsiNormalized').textContent = `${rawValues.rsi.toFixed(1)}/100`;
            document.getElementById('rsiContribution').textContent = `ê¸°ì—¬ë„: ${contributions.rsi.toFixed(1)}`;

            // ê°œë³„ ì§€í‘œ ìƒíƒœ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('mvrvStatus').textContent = rawValues.mvrv < 5 ? "ì•ˆì „ ì¶•ì  êµ¬ê°„" : "ì£¼ì˜ êµ¬ê°„";
            document.getElementById('altseasonStatus').textContent = rawValues.altseason > 75 ? "Altcoin Season" : "Bitcoin Season";
            document.getElementById('kimchiStatus').textContent = rawValues.kimchi < 0 ? "ì—­ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„" : "ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„";
            document.getElementById('dominanceStatus').textContent = rawValues.dominance > 60 ? "ë¹„íŠ¸ì½”ì¸ ê°•ì„¸" : "ì•ŒíŠ¸ì½”ì¸ ê°•ì„¸";

            // Fear & Greed ìƒíƒœ
            let fearGreedStatus;
            if (rawValues.fearGreed <= 25) fearGreedStatus = "Extreme Fear";
            else if (rawValues.fearGreed <= 45) fearGreedStatus = "Fear";
            else if (rawValues.fearGreed <= 55) fearGreedStatus = "Neutral";
            else if (rawValues.fearGreed <= 75) fearGreedStatus = "Greed";
            else fearGreedStatus = "Extreme Greed";
            document.getElementById('fearGreedStatus').textContent = fearGreedStatus;

            // RSI ìƒíƒœ
            let rsiStatus;
            if (rawValues.rsi > 70) rsiStatus = "ê³¼ë§¤ìˆ˜";
            else if (rawValues.rsi < 30) rsiStatus = "ê³¼ë§¤ë„";
            else rsiStatus = "ì¤‘ë¦½";
            document.getElementById('rsiStatus').textContent = rsiStatus;

            // ê³¼ê±° ì‚¬ì´í´ ë¹„êµ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            updateHistoricalChart(cspiScore);
            console.log(`ğŸ“Š ì°¨íŠ¸ ì—…ë°ì´íŠ¸ í˜¸ì¶œë¨ - CSPI: ${cspiScore}`);
        }

        // í˜„ì¬ ì‚¬ì´í´ ë°ì´í„° ìƒì„± í•¨ìˆ˜
        function generateCurrentCycleData(currentCSPI) {
            const baseData = [15, 20, 25, 32]; // ì´ˆê¸° 4ê°œ í¬ì¸íŠ¸
            const totalPoints = 11; // 0%ë¶€í„° 100%ê¹Œì§€ 11ê°œ í¬ì¸íŠ¸

            // í˜„ì¬ CSPI ì ìˆ˜ì— ë”°ë¼ ìœ„ì¹˜ ê²°ì •
            let currentIndex = Math.min(Math.floor(currentCSPI / 10), 10);
            if (currentIndex < 4) currentIndex = 4; // ìµœì†Œ 40% ìœ„ì¹˜

            const result = [...baseData];

            // í˜„ì¬ í¬ì¸íŠ¸ê¹Œì§€ ë°ì´í„° ì±„ìš°ê¸°
            for (let i = 4; i <= currentIndex && i < totalPoints; i++) {
                if (i === currentIndex) {
                    result[i] = currentCSPI;
                } else {
                    // ì„ í˜• ë³´ê°„ìœ¼ë¡œ ì¤‘ê°„ê°’ ê³„ì‚°
                    const progress = (i - 3) / (currentIndex - 3);
                    result[i] = 32 + (currentCSPI - 32) * progress;
                }
            }

            // í˜„ì¬ í¬ì¸íŠ¸ ì´í›„ëŠ” ì˜ˆì¸¡ ê³¡ì„  (ì˜µì…˜)
            for (let i = currentIndex + 1; i < totalPoints; i++) {
                // ê³¼ê±° íŒ¨í„´ ê¸°ë°˜ ì˜ˆì¸¡ (2017, 2021 í‰ê· )
                const avgPattern = [20, 25, 30, 35, 45, 55, 70, 85, 95, 92, 88];
                const scaleFactor = currentCSPI / avgPattern[currentIndex];
                result[i] = avgPattern[i] * scaleFactor;
            }

            return result;
        }

        function getCurrentCycleIndex(currentCSPI) {
            let index = Math.min(Math.floor(currentCSPI / 10), 10);
            return Math.max(index, 4); // ìµœì†Œ 40% ìœ„ì¹˜
        }

        // ê³¼ê±° ì‚¬ì´í´ ë¹„êµ ì°¨íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ìƒˆë¡œ ì‘ì„±)
        function updateHistoricalChart(currentCSPI) {
            console.log(`ğŸ”„ ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ì‹œì‘ - CSPI: ${currentCSPI}`);

            const canvas = document.getElementById('historicalChart');
            if (!canvas) {
                console.error('âŒ historicalChart ìº”ë²„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }

            // Chart.js ë¡œë“œ í™•ì¸
            if (typeof Chart === 'undefined') {
                console.error('âŒ Chart.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
                return;
            }

            // ìº”ë²„ìŠ¤ ì´ˆê¸°í™” (í¬ê¸° ì¬ì„¤ì •ìœ¼ë¡œ ê°•ì œ ì •ë¦¬)
            const parent = canvas.parentNode;
            const newCanvas = canvas.cloneNode(true);
            parent.replaceChild(newCanvas, canvas);
            console.log('ğŸ”„ ìº”ë²„ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ');

            // ê¸°ì¡´ ì°¨íŠ¸ê°€ ìˆìœ¼ë©´ ì™„ì „íˆ ì œê±°
            if (window.historicalChart) {
                try {
                    window.historicalChart.destroy();
                    window.historicalChart = null;
                    console.log('ï¿½ï¸ ê¸°ì¡´  ì°¨íŠ¸ ì™„ì „íˆ ì œê±°ë¨');
                } catch (e) {
                    console.warn('âš ï¸ ì°¨íŠ¸ ì œê±° ì¤‘ ì˜¤ë¥˜:', e);
                    window.historicalChart = null;
                }
            }

            // Chart.js ì¸ìŠ¤í„´ìŠ¤ ê°•ì œ ì •ë¦¬
            Chart.getChart(canvas)?.destroy();
            console.log('ğŸ“Š ìƒˆ ì°¨íŠ¸ ìƒì„± ì¤‘...');

            // í˜„ì¬ ì‚¬ì´í´ ë°ì´í„° ìƒì„± (ê°„ë‹¨í•œ ë°©ì‹)
            const current2025Data = [15, 20, 25, 32];

            // CSPI ì ìˆ˜ì— ë”°ë¼ í˜„ì¬ ìœ„ì¹˜ì— ì  ì¶”ê°€
            if (currentCSPI >= 35) current2025Data.push(currentCSPI);
            else current2025Data.push(35, currentCSPI);

            // ë‚˜ë¨¸ì§€ëŠ” nullë¡œ ì±„ìš°ê¸°
            while (current2025Data.length < 11) {
                current2025Data.push(null);
            }

            console.log('ğŸ“Š 2025 ì‚¬ì´í´ ë°ì´í„°:', current2025Data);

            const chartData = {
                labels: ['0%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '100%'],
                datasets: [
                    {
                        label: '2017 ì‚¬ì´í´',
                        data: [20, 25, 30, 35, 45, 55, 70, 85, 95, 92, 88],
                        borderColor: '#1FB8CD',
                        backgroundColor: 'rgba(31, 184, 205, 0.1)',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        fill: false
                    },
                    {
                        label: '2021 ì‚¬ì´í´',
                        data: [18, 22, 28, 38, 48, 58, 68, 78, 92, 89, 85],
                        borderColor: '#FFC185',
                        backgroundColor: 'rgba(255, 193, 133, 0.1)',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        fill: false
                    },
                    {
                        label: '2025 ì‚¬ì´í´ (í˜„ì¬)',
                        data: current2025Data,
                        borderColor: '#B4413C',
                        backgroundColor: 'rgba(180, 65, 60, 0.1)',
                        tension: 0.4,
                        borderWidth: 4,
                        pointRadius: 6,
                        pointHoverRadius: 10,
                        fill: false,
                        borderDash: [5, 5]
                    }
                ]
            };

            try {
                const newCanvas = document.getElementById('historicalChart');
                const ctx = newCanvas.getContext('2d');
                if (!ctx) {
                    console.error('âŒ ìº”ë²„ìŠ¤ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                    return;
                }

                window.historicalChart = new Chart(ctx, {
                    type: 'line',
                    data: chartData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(22, 27, 34, 0.95)',
                                titleColor: '#f0f6fc',
                                bodyColor: '#f0f6fc',
                                borderColor: '#58a6ff',
                                borderWidth: 1,
                                cornerRadius: 8,
                                callbacks: {
                                    label: function (context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null && context.parsed.y !== undefined) {
                                            label += context.parsed.y.toFixed(1) + ' CSPI';

                                            if (context.dataset.label.includes('2025')) {
                                                label += ' (í˜„ì¬)';
                                            }
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: '#30363d',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8b949e'
                                },
                                title: {
                                    display: true,
                                    text: 'ì‚¬ì´í´ ì§„í–‰ë¥ ',
                                    color: '#8b949e',
                                    font: {
                                        size: 14,
                                        weight: 'bold'
                                    }
                                }
                            },
                            y: {
                                grid: {
                                    color: '#30363d',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#8b949e',
                                    callback: function (value) {
                                        return value.toFixed(0);
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'CSPI ì ìˆ˜',
                                    color: '#8b949e',
                                    font: {
                                        size: 14,
                                        weight: 'bold'
                                    }
                                },
                                min: 0,
                                max: 100
                            }
                        }
                    }
                });

                console.log('âœ… ì°¨íŠ¸ ìƒì„± ì™„ë£Œ');

            } catch (error) {
                console.error('âŒ ì°¨íŠ¸ ìƒì„± ì‹¤íŒ¨:', error);
            }
        }
    </script>
    <script src="crypto-data.js"></script>
    <script src="main.js"></script>
</body>

</html>